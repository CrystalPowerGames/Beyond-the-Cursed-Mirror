#include <ultra64.h>
#include "sm64.h"
#include "behavior_data.h"
#include "model_ids.h"
#include "seq_ids.h"
#include "dialog_ids.h"
#include "segment_symbols.h"
#include "level_commands.h"

#include "game/level_update.h"

#include "levels/scripts.h"

#include "actors/group0.h"
#include "actors/common1.h"

/* Fast64 begin persistent block [includes] */
/* Fast64 end persistent block [includes] */

#include "make_const_nonconst.h"
#include "levels/sl/header.h"

/* Fast64 begin persistent block [scripts] */
/* Fast64 end persistent block [scripts] */

const LevelScript level_sl_entry[] = {
	INIT_LEVEL(),
	LOAD_YAY0(0x07, _sl_segment_7SegmentRomStart, _sl_segment_7SegmentRomEnd), 
	LOAD_YAY0_TEXTURE(0x09, _snow_yay0SegmentRomStart, _snow_yay0SegmentRomEnd), 
	LOAD_YAY0(0x0B, _effect_yay0SegmentRomStart, _effect_yay0SegmentRomEnd), 
	LOAD_YAY0(0x0A, _ccm_skybox_yay0SegmentRomStart, _ccm_skybox_yay0SegmentRomEnd), 
	LOAD_YAY0(0x05, _group8_yay0SegmentRomStart, _group8_yay0SegmentRomEnd), 
	LOAD_RAW(0x0C, _group8_geoSegmentRomStart, _group8_geoSegmentRomEnd), 
	LOAD_YAY0(0x06, _group14_yay0SegmentRomStart, _group14_yay0SegmentRomEnd), 
	LOAD_RAW(0x0D, _group14_geoSegmentRomStart, _group14_geoSegmentRomEnd), 
	LOAD_YAY0(0x08, _common0_yay0SegmentRomStart, _common0_yay0SegmentRomEnd), 
	LOAD_RAW(0x0F, _common0_geoSegmentRomStart, _common0_geoSegmentRomEnd), 
	ALLOC_LEVEL_POOL(),
	MARIO(MODEL_MARIO, 0x00000001, bhvMario), 
	JUMP_LINK(script_func_global_1), 
	JUMP_LINK(script_func_global_9), 
	JUMP_LINK(script_func_global_15), 
	LOAD_MODEL_FROM_GEO(MODEL_SL_SNOW_TRIANGLE, sl_geo_000390), 
	LOAD_MODEL_FROM_GEO(MODEL_SL_CRACKED_ICE, sl_geo_000360), 
	LOAD_MODEL_FROM_GEO(MODEL_SL_CRACKED_ICE_CHUNK, sl_geo_000378), 
	LOAD_MODEL_FROM_GEO(MODEL_SL_SNOW_TREE, snow_tree_geo), 
	LOAD_MODEL_FROM_GEO(MODEL_FERN, server_acid_fern_geo), 
	LOAD_MODEL_FROM_GEO(MODEL_WOOGLY, woogly_geo), 
	LOAD_MODEL_FROM_GEO(MODEL_HEXAGON, HH_geo), 
	LOAD_MODEL_FROM_GEO(MODEL_SS, SS_geo), 
	LOAD_MODEL_FROM_GEO(MODEL_ROBOT, robot_geo), 
	LOAD_MODEL_FROM_GEO(MODEL_SPIKETUBE, spiketube_geo), 
	//LOAD_MODEL_FROM_GEO(MODEL_C10_SPOTLIGHT, spotlight_geo), 
	LOAD_MODEL_FROM_GEO(MODEL_CURTAIN, curtaincall_geo), 
	LOAD_MODEL_FROM_GEO(MODEL_REGGIE, reggie_geo), 
	LOAD_MODEL_FROM_GEO(MODEL_CURTAIN_2, curtain2_geo), 
	LOAD_MODEL_FROM_GEO(MODEL_MOTOS_C10, RCP_HmsEnemymotos_basedata_A), 

	/* Fast64 begin persistent block [level commands] */
	/* Fast64 end persistent block [level commands] */

	AREA(1, sl_area_1),
		WARP_NODE(0x0A, LEVEL_BOB, 0x01, 0x0A, WARP_NO_CHECKPOINT),
		WARP_NODE(0x01, LEVEL_SL, 0x02, 0x0A, WARP_NO_CHECKPOINT),
		WARP_NODE(0x00, LEVEL_SL, 0x03, 0x0A, WARP_NO_CHECKPOINT),
		WARP_NODE(0x02/*quizarea*/, LEVEL_SL, 0x04, 0x0A, WARP_NO_CHECKPOINT),
		WARP_NODE(240, LEVEL_DDD, 0x02, 0x03, WARP_NO_CHECKPOINT),
		WARP_NODE(241, LEVEL_DDD, 0x02, 0x04, WARP_NO_CHECKPOINT),
		OBJECT(MODEL_ATM, -172, 576, 8287, 0, 0, 0, 0x00000000, bhvATM),
		OBJECT(MODEL_BLUE_COIN, 9250, -111, -667, 0, 0, 0, 0x00000000, bhvHiddenBlueCoin),
		OBJECT(MODEL_BLUE_COIN, 9037, -103, -504, 0, 0, 0, 0x00000000, bhvHiddenBlueCoin),
		OBJECT(MODEL_BLUE_COIN, 8838, -105, -375, 0, 0, 0, 0x00000000, bhvHiddenBlueCoin),
		OBJECT(MODEL_BLUE_COIN, 8634, -118, -243, 0, 0, 0, 0x00000000, bhvHiddenBlueCoin),
		OBJECT(MODEL_BLUE_COIN_SWITCH, 9550, 113, -918, 0, 0, 0, 0x00000000, bhvBlueCoinSwitch),
		OBJECT(MODEL_EXCLAMATION_BOX, 3323, -1296, -6944, 0, 90, 0, (2 << 16), bhvExclamationBox),
		OBJECT(MODEL_CAP_SWITCH, -5665, 3700, 8037, 0, 90, 0, (2 << 16), bhvCapSwitch),
		OBJECT(MODEL_NONE, 1017, -2170, -4084, 0, 0, 0, (2 << 16), bhvCoinFormation),
		OBJECT(MODEL_NONE, 2942, -1586, -4294, 0, 0, 0, 0x00000000, bhvCoinFormation),
		OBJECT(MODEL_NONE, -8835, -40, -2499, 0, 0, 0, 0x00000000, bhvCoinFormation),
		OBJECT(MODEL_NONE, 9712, 113, 3303, 0, 0, 0, 0x00000000, bhvCoinFormation),
		OBJECT(MODEL_NONE, 44, 1400, 3683, 0, 0, 0, (2 << 16), bhvCoinFormation),
		OBJECT(MODEL_NONE, -950, 2684, 2117, 0, 90, 0, 0x00000000, bhvCoinFormation),
		OBJECT(MODEL_NONE, -5516, 2663, 7120, 0, 90, 0, 0x00000000, bhvCoinFormation),
		OBJECT(MODEL_NONE, -5060, 1017, 7081, 0, 0, 0, (1 << 16), bhvCoinFormation),
		OBJECT(MODEL_NONE, -4363, 576, 2822, 0, 90, 0, 0x00000000, bhvCoinFormation),
		OBJECT(0xEE, 4629, 113, -2376, 0, -159, 0, (1 << 16), bhvHammerBro),
		OBJECT(0xEE, 9355, 113, -1297, 0, -1, 0, (1 << 16), bhvHammerBro),
		OBJECT(0xEE, 1562, -2170, -3542, 0, 0, 0, 0x00000000, bhvHammerBro),
		OBJECT(0xEE, 472, -2170, -4625, 0, -180, 0, 0x00000000, bhvHammerBro),
		OBJECT(0xEE, -1313, 1769, 2514, 0, -86, 0, (1 << 16), bhvHammerBro),
		OBJECT(0xEE, -8416, -40, -1927, 0, -2, 0, (1 << 16), bhvHammerBro),
		OBJECT(0xEE, 101, 1612, 7897, 0, 90, 0, 0x00000000, bhvHammerBro),
		OBJECT(0xEE, -5677, 2988, 2343, 0, -180, 0, (1 << 16), bhvHammerBro),
		OBJECT(0xEE, 6811, 983, 2723, 0, -180, 0, 0x00000000, bhvHammerBro),
		OBJECT(0xEE, 6103, 323, 662, 0, -180, 0, 0x00000000, bhvHammerBro),
		OBJECT(0xEB, 717, -1692, -4380, 0, 0, -90, 0x00000000, bhvGoldRing),
		OBJECT(0xEB, 717, -2915, -4380, 0, 0, -90, 0x00000000, bhvGoldRing),
		OBJECT(0xEB, 2300, -2126, -4866, 0, 41, 0, 0x00000000, bhvGoldRing),
		OBJECT(0xEB, 4521, -1595, -3304, 0, -46, 0, 0x00000000, bhvGoldRing),
		OBJECT(0xEB, 4827, -888, -2964, 0, -39, 0, 0x00000000, bhvGoldRing),
		OBJECT(0xEF, 4402, -1586, -2732, 0, 0, 0, 0x00000000, bhvGreenCoin),
		OBJECT(0xEF, -2695, -1262, -5800, 0, 0, 0, 0x00000000, bhvGreenCoin),
		OBJECT(0xEF, 6509, 323, -1311, 0, 0, 0, 0x00000000, bhvGreenCoin),
		OBJECT(0xEF, -5891, 1555, 7283, 0, 0, 0, 0x00000000, bhvGreenCoin),
		OBJECT(0xEF, -5080, 576, 2563, 0, 0, 0, 0x00000000, bhvGreenCoin),
		OBJECT(0xEF, -7689, 576, 9996, 0, 0, 0, 0x00000000, bhvGreenCoin),
		OBJECT(MODEL_MOTOS_C10, 15, -2985, -6793, 0, 0, 0, 0x00000000, bhvMotosAlligator),
		OBJECT(MODEL_MOTOS_C10, 3920, -1790, -4301, 0, -86, 0, 0x00000000, bhvMotosAlligator),
		OBJECT(MODEL_MOTOS_C10, -7056, -347, -4839, 0, -171, 0, 0x00000000, bhvMotosAlligator),
		MARIO_POS(0x01, 0, 8174, 830, 10789),
		OBJECT(MODEL_NONE, -4200, 3691, 3683, 0, 0, 0, (1 << 24), bhvHiddenRedCoinStar),
		OBJECT(MODEL_RED_COIN, 5868, 2044, 2365, 0, 0, 0, 0x00000000, bhvRedCoin),
		OBJECT(MODEL_RED_COIN, 7346, 1183, 3857, 0, 0, 0, 0x00000000, bhvRedCoin),
		OBJECT(MODEL_RED_COIN, 7346, 1183, 3257, 0, 0, 0, 0x00000000, bhvRedCoin),
		OBJECT(MODEL_RED_COIN, 7070, 323, 3578, 0, 0, 0, 0x00000000, bhvRedCoin),
		OBJECT(MODEL_RED_COIN, 67, 1267, 6502, 0, 0, 0, 0x00000000, bhvRedCoin),
		OBJECT(MODEL_RED_COIN, -4638, 873, 7402, 0, 0, 0, 0x00000000, bhvRedCoin),
		OBJECT(MODEL_RED_COIN, -4129, 4719, 2128, 0, 0, 0, 0x00000000, bhvRedCoin),
		OBJECT(MODEL_RED_COIN, 5579, 523, 1254, 0, 0, 0, 0x00000000, bhvRedCoin),
		OBJECT(MODEL_PURPLE_SWITCH, 3769, -1586, -6707, 0, -40, 0, (3 << 24) | (17 << 16), bhvPurpleSwitchHiddenBoxes),
		OBJECT(MODEL_ROBOT, -2049, -3063, -7811, 0, -91, 0, (122 << 16), bhvRobot),
		OBJECT(MODEL_ROBOT, -7134, -184, -7158, 0, 19, 0, (90 << 16), bhvRobot),
		OBJECT(MODEL_ROBOT, -1184, 576, 3553, 0, -38, 0, (6 << 24) | (1 << 16), bhvRobot),
		OBJECT(MODEL_ROBOT, 3687, 113, 3050, 0, 89, 0, (123 << 16), bhvRobot),
		OBJECT(MODEL_ROBOT, -4807, 576, 8300, 0, 89, 0, (124 << 16), bhvRobot),
		OBJECT(MODEL_ROBOT, -7099, 576, 5112, 0, 89, 0, (125 << 16), bhvRobot),
		OBJECT(MODEL_ROBOT, 7613, 830, 9084, 0, -147, 0, (126 << 16), bhvRobot),
		OBJECT(MODEL_FERN, -1547, -3062, -5879, 0, 0, 0, 0x00000000, bhvFern),
		OBJECT(MODEL_FERN, -1407, -3062, -5522, 0, 0, 0, 0x00000000, bhvFern),
		OBJECT(MODEL_FERN, 4814, -1586, -3800, 0, 0, 0, 0x00000000, bhvFern),
		OBJECT(MODEL_FERN, 1418, -2843, -5600, 0, 0, 0, 0x00000000, bhvFern),
		OBJECT(MODEL_FERN, 1051, -2843, -5674, 0, 0, 0, 0x00000000, bhvFern),
		OBJECT(MODEL_FERN, 753, -2843, -6938, 0, 0, 0, 0x00000000, bhvFern),
		OBJECT(MODEL_FERN, 720, -2843, -6367, 0, 0, 0, 0x00000000, bhvFern),
		OBJECT(MODEL_FERN, -543, -2799, -6912, 0, 0, 0, 0x00000000, bhvFern),
		OBJECT(MODEL_FERN, -7010, -73, -5799, 0, 0, 0, 0x00000000, bhvFern),
		OBJECT(MODEL_FERN, -7545, -63, -5472, 0, 0, 0, 0x00000000, bhvFern),
		OBJECT(MODEL_FERN, -7903, -40, -1760, 0, 0, 0, 0x00000000, bhvFern),
		OBJECT(MODEL_FERN, -8179, -40, -1816, 0, 0, 0, 0x00000000, bhvFern),
		OBJECT(MODEL_FERN, 1998, -1586, -6879, 0, 0, 0, 0x00000000, bhvFern),
		OBJECT(MODEL_FERN, 2274, -1586, -6879, 0, 0, 0, 0x00000000, bhvFern),
		OBJECT(MODEL_FERN, 8347, 113, 5081, 0, 0, 0, 0x00000000, bhvFern),
		OBJECT(MODEL_FERN, 8087, 113, 5211, 0, 0, 0, 0x00000000, bhvFern),
		OBJECT(MODEL_FERN, 7814, 113, 5308, 0, 0, 0, 0x00000000, bhvFern),
		OBJECT(MODEL_FERN, 7569, 113, 5390, 0, 0, 0, 0x00000000, bhvFern),
		OBJECT(MODEL_FERN, 3846, 113, 2134, 0, 0, 0, 0x00000000, bhvFern),
		OBJECT(MODEL_FERN, 4167, 113, 556, 0, 0, 0, 0x00000000, bhvFern),
		OBJECT(MODEL_FERN, 8969, 113, -1883, 0, 0, 0, 0x00000000, bhvFern),
		OBJECT(MODEL_FERN, 8819, 113, -2537, 0, 0, 0, 0x00000000, bhvFern),
		OBJECT(MODEL_NONE, -4213, -3063, -7791, 0, 0, 0, (0x0A << 16), bhvSpinAirborneWarp),
		OBJECT(MODEL_STAR, -4298, 3789, 8218, 0, 0, 0, 0x00000000, bhvStar),
		OBJECT(0xE6, -2695, -355, -6393, 0, 90, 0, (2 << 16), bhv_costume_token),
		OBJECT(MODEL_SPIKETUBE, 9380, -517, 1635, 0, 0, 0, 0x00000000, bhvSpiketube),
		OBJECT(0xE3, -6289, 3003, 6111, 0, 0, 0, (9 << 16), bhv_Wallet),
		OBJECT(MODEL_NONE, -7782, -875, -7033, 0, 0, 0, (40 << 24) | (1 << 16), bhvWarp),
		OBJECT(MODEL_WHOMP, 8516, 830, 10826, 0, -90, 0, (DIALOG_153 << 16), bhvWhompWall),
		OBJECT(MODEL_WOOGLY, -4416, -2665, -5576, 0, 106, 0, 0x00000000, bhvWoogly),
		OBJECT(MODEL_WOOGLY, -4110, -814, -3150, 0, 119, 0, 0x00000000, bhvWoogly),
		OBJECT(MODEL_WOOGLY, -3025, -634, -2179, 0, 157, 0, (2 << 16), bhvWoogly),
		OBJECT(MODEL_WOOGLY, 9374, -219, -813, 0, -46, 0, 0x00000000, bhvWoogly),
		OBJECT(MODEL_WOOGLY, -4129, 2520, 5984, 0, -180, 0, 0x00000000, bhvWoogly),
		OBJECT(MODEL_WOOGLY, -1430, 2302, 5984, 0, -180, 0, 0x00000000, bhvWoogly),
		OBJECT(MODEL_WOOGLY, -4129, 2520, 7020, 0, 0, 0, (2 << 16), bhvWoogly),
		OBJECT(MODEL_WOOGLY, -5147, 3566, 8206, 0, 90, 0, 0x00000000, bhvWoogly),
		TERRAIN(sl_area_1_collision),
		MACRO_OBJECTS(sl_area_1_macro_objs),
		SET_BACKGROUND_MUSIC(0x00, SEQ_REDHOT),
		TERRAIN_TYPE(TERRAIN_GRASS),
		/* Fast64 begin persistent block [area commands] */
		/* Fast64 end persistent block [area commands] */
	END_AREA(),

	AREA(2, sl_area_2),
		WARP_NODE(0x0A, LEVEL_BOB, 0x01, 0x0A, WARP_NO_CHECKPOINT),
		WARP_NODE(240, LEVEL_DDD, 0x02, 0x03, WARP_NO_CHECKPOINT),
		WARP_NODE(241, LEVEL_DDD, 0x02, 0x04, WARP_NO_CHECKPOINT),
		OBJECT(MODEL_HEXAGON, 0, 954, 0, 0, 0, 0, (2 << 24) | (1 << 16), bhvHH),
		OBJECT(MODEL_NONE, 0, 1021, 0, 0, -180, 0, (0x0A << 16), bhvSpinAirborneWarp),
		OBJECT(MODEL_SS, 0, 1717, -3088, 0, -180, 0, 0x00000000, bhvHH_Screen),
		TERRAIN(sl_area_2_collision),
		MACRO_OBJECTS(sl_area_2_macro_objs),
		SET_BACKGROUND_MUSIC(0x00, SEQ_REDHOT),
		TERRAIN_TYPE(TERRAIN_GRASS),
		/* Fast64 begin persistent block [area commands] */
		/* Fast64 end persistent block [area commands] */
	END_AREA(),

	AREA(3, sl_area_3),
		WARP_NODE(0x0A, LEVEL_BOB, 0x01, 0x0A, WARP_NO_CHECKPOINT),
		WARP_NODE(240, LEVEL_DDD, 0x02, 0x03, WARP_NO_CHECKPOINT),
		WARP_NODE(241, LEVEL_DDD, 0x02, 0x04, WARP_NO_CHECKPOINT),
		OBJECT(MODEL_MOTOS_C10, -704, -1869, -204, 0, 2, 0, 0x00000000, bhvMotosAlligator),
		OBJECT(MODEL_MOTOS_C10, -4263, -1869, 2436, 0, -141, 0, 0x00000000, bhvMotosAlligator),
		OBJECT(MODEL_MOTOS_C10, 5497, -1869, -267, 0, -35, 0, 0x00000000, bhvMotosAlligator),
		OBJECT(MODEL_MOTOS_C10, 8005, -1869, 2301, 0, -172, 0, 0x00000000, bhvMotosAlligator),
		OBJECT(MODEL_NONE, -8544, -1660, 1066, 0, -180, 0, (0x0A << 16), bhvSpinAirborneWarp),
		OBJECT(MODEL_STAR, 11527, -836, 1073, 0, 0, 0, (4 << 24), bhvStar),
		OBJECT(MODEL_SPIKETUBE, -8544, -1717, 1066, 0, 0, 0, (1 << 16), bhvSpiketube),
		TERRAIN(sl_area_3_collision),
		MACRO_OBJECTS(sl_area_3_macro_objs),
		SET_BACKGROUND_MUSIC(0x00, SEQ_REDHOT),
		TERRAIN_TYPE(TERRAIN_GRASS),
		/* Fast64 begin persistent block [area commands] */
		/* Fast64 end persistent block [area commands] */
	END_AREA(),

	AREA(4, sl_area_4),
		WARP_NODE(0x0A, LEVEL_BOB, 0x01, 0x0A, WARP_NO_CHECKPOINT),
		WARP_NODE(240, LEVEL_DDD, 0x02, 0x03, WARP_NO_CHECKPOINT),
		WARP_NODE(241, LEVEL_DDD, 0x02, 0x04, WARP_NO_CHECKPOINT),
		OBJECT(MODEL_REGGIE, -800, 347, -1987, 0, 0, 0, 0x00000000, bhvContestant1),
		OBJECT(MODEL_WHOMP, 800, 347, -1987, 0, 0, 0, (1 << 16), bhvContestant2),
		OBJECT(MODEL_NONE, -300, 659, -3368, 0, 0, 0, (6 << 24) | (1 << 16), bhvStar),
		OBJECT(MODEL_CURTAIN, -2422, -100, -868, 0, 0, 0, 0x00000000, bhvCurtain),
		OBJECT(MODEL_CURTAIN_2, 0, 1333, -2515, 0, 0, 0, 0x00000000, bhvCurtain2),
		OBJECT(MODEL_EXCLAMATION_BOX, -2054, 228, -868, 0, 0, 0, (1 << 16), bhvExclamationBox),
		OBJECT(MODEL_BOWSER_KEY, 300, 659, -3368, 0, 0, 0, 0x00000000, bhvManualKey),
		OBJECT(MODEL_SHOWRUNNER, 0, 340, 610, 0, -180, 0, 0x00000000, bhvShowrunner),
		OBJECT(MODEL_NONE, -2633, -100, -855, 0, 90, 0, (0x0A << 16), bhvSpinAirborneWarp),
		OBJECT(MODEL_C10_SPOTLIGHT, 500, 440, 610, 0, 0, 0, 0x00000000, bhvSpotlight),
		OBJECT(MODEL_C10_SPOTLIGHT, 1000, 346, 1945, 0, 0, 0, 0x00000000, bhvSpotlight),
		OBJECT(MODEL_C10_SPOTLIGHT, -1000, 346, 1945, 0, 0, 0, 0x00000000, bhvSpotlight),
		OBJECT(MODEL_C10_SPOTLIGHT, -1158, 346, -1449, 0, 0, 0, 0x00000000, bhvSpotlight),
		OBJECT(MODEL_C10_SPOTLIGHT, 1158, 346, -1449, 0, 0, 0, 0x00000000, bhvSpotlight),
		OBJECT(MODEL_C10_SPOTLIGHT, -500, 440, 610, 0, 0, 0, 0x00000000, bhvSpotlight),
		OBJECT(MODEL_NONE, 0, 656, 171, 0, 0, 0, 0x00000000, bhvStaticObject),
		OBJECT(0xE6, 1641, -100, 1486, 0, 90, 0, (5 << 16), bhv_costume_token),
		TERRAIN(sl_area_4_collision),
		MACRO_OBJECTS(sl_area_4_macro_objs),
		STOP_MUSIC(0),
		TERRAIN_TYPE(TERRAIN_GRASS),
		/* Fast64 begin persistent block [area commands] */
		/* Fast64 end persistent block [area commands] */
	END_AREA(),

	FREE_LEVEL_POOL(),
	MARIO_POS(0x01, 0, 8174, 830, 10789),
	CALL(0, lvl_init_or_update),
	CALL_LOOP(1, lvl_init_or_update),
	CLEAR_LEVEL(),
	SLEEP_BEFORE_EXIT(1),
	EXIT(),
};
