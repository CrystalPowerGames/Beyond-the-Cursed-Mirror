#include <ultra64.h>
#include "sm64.h"
#include "behavior_data.h"
#include "model_ids.h"
#include "seq_ids.h"
#include "dialog_ids.h"
#include "segment_symbols.h"
#include "level_commands.h"

#include "game/level_update.h"

#include "levels/scripts.h"

#include "actors/common1.h"
#include "actors/group0.h"

/* Fast64 begin persistent block [includes] */
/* Fast64 end persistent block [includes] */

#include "make_const_nonconst.h"
#include "levels/ttc/header.h"

/* Fast64 begin persistent block [scripts] */
/* Fast64 end persistent block [scripts] */

const LevelScript level_ttc_entry[] = {
	INIT_LEVEL(),
	LOAD_YAY0(0x07, _ttc_segment_7SegmentRomStart, _ttc_segment_7SegmentRomEnd), 
	LOAD_YAY0_TEXTURE(0x09, _machine_yay0SegmentRomStart, _machine_yay0SegmentRomEnd), 
	LOAD_YAY0(0x05, _group5_yay0SegmentRomStart, _group5_yay0SegmentRomEnd), 
	LOAD_RAW(0x0C, _group5_geoSegmentRomStart, _group5_geoSegmentRomEnd), 
	LOAD_YAY0(0x08, _common0_yay0SegmentRomStart, _common0_yay0SegmentRomEnd), 
	LOAD_RAW(0x0F, _common0_geoSegmentRomStart, _common0_geoSegmentRomEnd), 
	LOAD_YAY0(0xa, _bitfs_skybox_yay0SegmentRomStart, _bitfs_skybox_yay0SegmentRomEnd), 
	ALLOC_LEVEL_POOL(),
	MARIO(MODEL_MARIO, 0x00000001, bhvMario), 
	JUMP_LINK(script_func_global_1), 
	JUMP_LINK(script_func_global_6), 
	LOAD_MODEL_FROM_GEO(MODEL_TTC_PINKCOIN, pink_coin_geo), 
	LOAD_MODEL_FROM_GEO(MODEL_OCEAN_TTC, tickocean_geo), 
	LOAD_MODEL_FROM_GEO(MODEL_HIGHCANE, highcane_geo), 
	LOAD_MODEL_FROM_GEO(MODEL_DENORMA, denormA_geo), 
	LOAD_MODEL_FROM_GEO(MODEL_DENORMB, denormO_geo), 
	//LOAD_MODEL_FROM_GEO(MODEL_TVHEAD_TTC, tvhead_geo), 
	//LOAD_MODEL_FROM_GEO(MODEL_TVHEAD_TTC, tvhead_geo), 
	LOAD_MODEL_FROM_GEO(MODEL_RAFT, raft_geo), 

	/* Fast64 begin persistent block [level commands] */
	/* Fast64 end persistent block [level commands] */

	AREA(1, ttc_area_1),
		WARP_NODE(0x0A/*spawn*/, LEVEL_BOB, 0x01, 0x0A, WARP_NO_CHECKPOINT),
		WARP_NODE(240/*success*/, LEVEL_BITS, 0x01, 0x09, WARP_NO_CHECKPOINT),
		WARP_NODE(241/*death*/, LEVEL_BITS, 0x01, 0x0B, WARP_NO_CHECKPOINT),
		OBJECT(MODEL_1UP, -10729, -487, 2581, 0, 0, 0, 0x00000000, bhv1Up),
		OBJECT(MODEL_1UP, -9191, 3776, 2813, 0, 0, 0, 0x00000000, bhv1Up),
		OBJECT(MODEL_1UP, -7354, 4851, 2148, 0, 0, 0, 0x00000000, bhv1Up),
		OBJECT(MODEL_1UP, 7493, 4437, -7095, 0, 0, 0, 0x00000000, bhv1Up),
		OBJECT(MODEL_1UP, 8041, 10262, -6816, 0, 0, 0, 0x00000000, bhv1Up),
		OBJECT(MODEL_NONE, 7107, 10456, -8050, 0, 0, 0, 0x00000000, bhvHidden1upInPoleTrigger),
		OBJECT(MODEL_BLUE_COIN, -9304, 4238, -2752, 0, 0, 0, 0x00000000, bhvHiddenBlueCoin),
		OBJECT(MODEL_BLUE_COIN, -8588, 4494, -2711, 0, 0, 0, 0x00000000, bhvHiddenBlueCoin),
		OBJECT(MODEL_BLUE_COIN, -7738, 5018, -2690, 0, 0, 0, 0x00000000, bhvHiddenBlueCoin),
		OBJECT(MODEL_BLUE_COIN, -6292, 5904, -2690, 0, 0, 0, 0x00000000, bhvHiddenBlueCoin),
		OBJECT(MODEL_BLUE_COIN_SWITCH, -10028, 4060, -2771, 0, 0, 0, 0x00000000, bhvBlueCoinSwitch),
		OBJECT(MODEL_NONE, -7576, 1562, -5780, 0, -39, 0, 0x00000000, bhvCoinFormation),
		OBJECT(MODEL_NONE, -11801, 1558, -10690, 0, -62, 0, 0x00000000, bhvCoinFormation),
		OBJECT(MODEL_NONE, -12061, 2363, -4737, 0, 20, 0, 0x00000000, bhvCoinFormation),
		OBJECT(MODEL_NONE, -3356, 993, -6448, 0, 37, 0, 0x00000000, bhvCoinFormation),
		OBJECT(MODEL_NONE, -9984, 541, 5812, 0, 98, 0, 0x00000000, bhvCoinFormation),
		OBJECT(MODEL_NONE, -1616, 543, 9821, 0, 127, 0, 0x00000000, bhvCoinFormation),
		OBJECT(MODEL_NONE, -3030, 1072, 10182, 0, 87, 0, 0x00000000, bhvCoinFormation),
		OBJECT(MODEL_NONE, -4955, 1275, 9432, 0, 50, 0, 0x00000000, bhvCoinFormation),
		OBJECT(MODEL_NONE, -7460, 153, 7216, 0, 50, 0, 0x00000000, bhvCoinFormation),
		OBJECT(MODEL_NONE, -4700, 30, 5244, 0, -180, 0, 0x00000000, bhvCoinFormation),
		OBJECT(MODEL_NONE, -4479, -221, 7098, 0, -180, 0, (2 << 16), bhvCoinFormation),
		OBJECT(MODEL_NONE, -1663, 269, 7505, 0, -180, 0, (2 << 16), bhvCoinFormation),
		OBJECT(MODEL_NONE, -8310, 1689, 3237, 0, -180, 0, (2 << 16), bhvCoinFormation),
		OBJECT(MODEL_NONE, -9216, 2723, -3892, 0, -180, 0, (2 << 16), bhvCoinFormation),
		OBJECT(MODEL_NONE, -4486, 963, -4195, 0, -180, 0, (2 << 16), bhvCoinFormation),
		OBJECT(MODEL_NONE, 7984, 8526, -6695, 0, -96, 0, 0x00000000, bhvCoinFormation),
		OBJECT(MODEL_NONE, 11115, 5677, -9058, 0, -47, 0, 0x00000000, bhvCoinFormation),
		OBJECT(MODEL_NONE, 5753, 4796, -10713, 0, 88, 0, 0x00000000, bhvCoinFormation),
		OBJECT(MODEL_NONE, 8039, 4306, -4646, 0, -96, 0, (2 << 16), bhvCoinFormation),
		OBJECT(MODEL_STAR, -10283, 4409, 4653, 0, 0, 0, (0 << 24), bhvStar),
		OBJECT(MODEL_STAR, 6905, 9485, -8761, 0, 0, 0, (3 << 24), bhvStar),
		OBJECT(MODEL_STAR, 5851, 7238, 6388, 0, 0, 0, (4 << 24), bhvStar),
		OBJECT(0xF0, -8195, 1694, 2364, 0, 0, 0, 0x00000000, bhvCrowbarPower),
		OBJECT(0xF0, -10135, 1125, -2083, 0, 0, 0, 0x00000000, bhvCrowbarPower),
		OBJECT(0xF0, 10969, 10022, 4559, 0, 0, 0, 0x00000000, bhvCrowbarPower),
		OBJECT_WITH_ACTS(MODEL_DENORMA, -9689, 1068, -2730, 0, -20, 0, (2 << 24) | (130 << 16), bhvDenorm, ACT_3),
		OBJECT_WITH_ACTS(MODEL_DENORMA, 10680, 5694, -10675, 0, 48, 0, (131 << 16), bhvDenorm, ACT_4),
		OBJECT_WITH_ACTS(MODEL_DENORMA, 2480, 1637, -9978, 0, -32, 0, (DIALOG_142 << 16), bhvDenorm, ACT_4),
		OBJECT_WITH_ACTS(MODEL_DENORMA, 4285, 4386, 10295, 0, -32, 0, (DIALOG_143 << 16), bhvDenorm, ACT_5),
		OBJECT_WITH_ACTS(MODEL_DENORMB, -3590, -251, 5462, 0, 11, 0, (2 << 24) | (DIALOG_140 << 16), bhvDenorm, ACT_1 | ACT_2),
		OBJECT_WITH_ACTS(MODEL_DENORMB, -10050, 2528, -3917, 0, -84, 0, (2 << 24) | (DIALOG_141 << 16), bhvDenorm, ACT_3),
		OBJECT_WITH_ACTS(MODEL_DENORMB, 6086, 6880, 5870, 0, 94, 0, (2 << 24) | (DIALOG_144 << 16), bhvDenorm, ACT_5),
		OBJECT(MODEL_NONE, 10969, 10022, 1321, 0, 0, 0, (6 << 24), bhvEyerokBoss),
		OBJECT(MODEL_HIGHCANE, -10377, 1727, -5903, 0, 0, 0, 0x00000000, bhvHighcane),
		OBJECT(MODEL_HIGHCANE, -11669, 1706, -5843, 0, 0, 0, 0x00000000, bhvHighcane),
		OBJECT(MODEL_HIGHCANE, -11039, 1900, -4946, 0, 0, 0, 0x00000000, bhvHighcane),
		OBJECT(MODEL_HIGHCANE, -10788, 1321, -2087, 0, 0, 0, 0x00000000, bhvHighcane),
		OBJECT(MODEL_HIGHCANE, -9157, 1770, -5056, 0, 0, 0, 0x00000000, bhvHighcane),
		OBJECT(MODEL_HIGHCANE, -7762, 545, -5725, 0, 0, 0, 0x00000000, bhvHighcane),
		OBJECT(MODEL_HIGHCANE, -5902, 636, -5275, 0, 0, 0, 0x00000000, bhvHighcane),
		OBJECT(MODEL_HIGHCANE, -4486, 1097, -4195, 0, 0, 0, 0x00000000, bhvHighcane),
		OBJECT(MODEL_HIGHCANE, -4033, 738, -7425, 0, 0, 0, 0x00000000, bhvHighcane),
		OBJECT(MODEL_HIGHCANE, -6509, 745, -8608, 0, 0, 0, 0x00000000, bhvHighcane),
		OBJECT(MODEL_HIGHCANE, -5850, 682, -9154, 0, 0, 0, 0x00000000, bhvHighcane),
		OBJECT(MODEL_HIGHCANE, -5713, 654, -8439, 0, 0, 0, 0x00000000, bhvHighcane),
		OBJECT(MODEL_HIGHCANE, -9167, 845, -9827, 0, 0, 0, 0x00000000, bhvHighcane),
		OBJECT(MODEL_HIGHCANE, -9259, 822, -7569, 0, 0, 0, 0x00000000, bhvHighcane),
		OBJECT(MODEL_HIGHCANE, -9561, 677, -6324, 0, 0, 0, 0x00000000, bhvHighcane),
		OBJECT(MODEL_HIGHCANE, -11433, 2484, -3755, 0, 0, 0, 0x00000000, bhvHighcane),
		OBJECT(MODEL_HIGHCANE, -7060, 648, -5603, 0, 0, 0, 0x00000000, bhvHighcane),
		OBJECT(MODEL_HIGHCANE, -5641, 708, -4536, 0, 0, 0, 0x00000000, bhvHighcane),
		OBJECT(MODEL_HIGHCANE, -8660, 730, -8779, 0, 0, 0, 0x00000000, bhvHighcane),
		OBJECT(MODEL_HIGHCANE, -6391, 1512, -6238, 0, 0, 0, 0x00000000, bhvHighcane),
		MARIO_POS(0x01, 0, -2924, 50, 6727),
		OBJECT(MODEL_MARIO, -7371, 131, 6195, 0, 65, 0, 0x00000000, bhvPhantasm),
		OBJECT(MODEL_MARIO, -11065, 514, 5442, 0, 65, 0, 0x00000000, bhvPhantasm),
		OBJECT(MODEL_MARIO, -9984, 1615, 3005, 0, 65, 0, 0x00000000, bhvPhantasm),
		OBJECT(MODEL_MARIO, -7455, -482, 445, 0, 65, 0, 0x00000000, bhvPhantasm),
		OBJECT(MODEL_MARIO, -10829, 1740, -6458, 0, 65, 0, 0x00000000, bhvPhantasm),
		OBJECT(MODEL_MARIO, -8870, 637, -6350, 0, 65, 0, 0x00000000, bhvPhantasm),
		OBJECT(MODEL_MARIO, -6136, 722, -8700, 0, -97, 0, 0x00000000, bhvPhantasm),
		OBJECT(MODEL_MARIO, 8991, 6101, 5848, 0, -11, 0, 0x00000000, bhvPhantasm),
		OBJECT(MODEL_MARIO, 9646, 4403, 8006, 0, -11, 0, 0x00000000, bhvPhantasm),
		OBJECT(MODEL_TTC_PINKCOIN, -4706, -286, 5244, 0, 0, 0, 0x00000000, bhvRedCoin),
		OBJECT(MODEL_TTC_PINKCOIN, 300, 143, 6893, 0, 0, 0, 0x00000000, bhvRedCoin),
		OBJECT(MODEL_TTC_PINKCOIN, -6904, 1376, 8212, 0, 0, 0, 0x00000000, bhvRedCoin),
		OBJECT(MODEL_TTC_PINKCOIN, -5007, 676, 3349, 0, 0, 0, 0x00000000, bhvRedCoin),
		OBJECT(MODEL_TTC_PINKCOIN, 99, 84, 4629, 0, 0, 0, 0x00000000, bhvRedCoin),
		OBJECT(MODEL_TTC_PINKCOIN, -11050, 798, 5016, 0, 0, 0, 0x00000000, bhvRedCoin),
		OBJECT(MODEL_TTC_PINKCOIN, -8978, 1044, 4908, 0, 0, 0, 0x00000000, bhvRedCoin),
		OBJECT(MODEL_TTC_PINKCOIN, -6209, 443, 3329, 0, 0, 0, 0x00000000, bhvRedCoin),
		OBJECT(MODEL_NONE, -5369, -463, 3370, 0, 0, 0, (100 << 16), bhvPoleGrabbing),
		OBJECT(MODEL_NONE, -4017, -462, 3358, 0, 0, 0, (100 << 16), bhvPoleGrabbing),
		OBJECT(MODEL_NONE, -2768, 50, 6719, 0, 0, 0, (140 << 16), bhvPoleGrabbing),
		OBJECT(MODEL_NONE, -3192, 50, 6719, 0, 0, 0, (140 << 16), bhvPoleGrabbing),
		OBJECT(MODEL_NONE, -2768, 50, 7143, 0, 0, 0, (140 << 16), bhvPoleGrabbing),
		OBJECT(MODEL_NONE, -3192, 50, 7143, 0, 0, 0, (140 << 16), bhvPoleGrabbing),
		OBJECT_WITH_ACTS(MODEL_RAFT, 2037, 1166, -8369, 0, 122, 0, 0x00000000, bhvRaft, ACT_4),
		OBJECT_WITH_ACTS(MODEL_RAFT, 3925, 4259, 10507, 0, 122, 0, 0x00000000, bhvRaft, ACT_5),
		OBJECT_WITH_ACTS(MODEL_RAFT, 11181, 9492, 7068, 0, -177, 0, 0x00000000, bhvRaft, ACT_6),
		OBJECT(MODEL_NONE, -6376, 1677, 8013, 0, 0, 0, (1 << 24), bhvHiddenRedCoinStar),
		OBJECT_WITH_ACTS(MODEL_NONE, -2980, 50, 6931, 0, -180, 0, (0x0A << 16), bhvInstantActiveWarp, ACT_1 | ACT_2),
		OBJECT_WITH_ACTS(MODEL_NONE, -6967, 1615, 2592, 0, 117, 0, (0x0A << 16), bhvInstantActiveWarp, ACT_3),
		OBJECT_WITH_ACTS(MODEL_NONE, 2037, 1803, -8369, 0, 117, 0, (0x0A << 16), bhvSpinAirborneWarp, ACT_4),
		OBJECT_WITH_ACTS(MODEL_NONE, 3925, 4850, 10507, 0, 135, 0, (0x0A << 16), bhvSpinAirborneWarp, ACT_5),
		OBJECT_WITH_ACTS(MODEL_NONE, 11181, 9956, 7068, 0, -180, 0, (0x0A << 16), bhvSpinAirborneWarp, ACT_6),
		OBJECT_WITH_ACTS(MODEL_OCEAN_TTC, 0, -840, 0, 0, 0, 0, 0x00000000, bhvOceanTTC, ACT_1 | ACT_2),
		OBJECT_WITH_ACTS(MODEL_OCEAN_TTC, 0, -107, 0, 0, 0, 0, 0x00000000, bhvOceanTTC, ACT_3),
		OBJECT_WITH_ACTS(MODEL_OCEAN_TTC, 0, 1083, 0, 0, 0, 0, 0x00000000, bhvOceanTTC, ACT_4),
		OBJECT_WITH_ACTS(MODEL_OCEAN_TTC, 0, 4203, 0, 0, 0, 0, 0x00000000, bhvOceanTTC, ACT_5),
		OBJECT_WITH_ACTS(MODEL_OCEAN_TTC, 0, 9436, 0, 0, 0, 0, 0x00000000, bhvOceanTTC, ACT_6),
		OBJECT(MODEL_TVHEAD_TTC, -278, 404, 6604, 0, -101, 0, 0x00000000, bhvTVhead),
		OBJECT(MODEL_TVHEAD_TTC, -9437, 1888, 4150, 0, 152, 0, 0x00000000, bhvTVhead),
		OBJECT(MODEL_TVHEAD_TTC, -6133, 881, -5108, 0, -23, 0, 0x00000000, bhvTVhead),
		OBJECT(MODEL_TVHEAD_TTC, 7772, 4656, 5426, 0, -11, 0, 0x00000000, bhvTVhead),
		OBJECT(MODEL_NONE, -8455, 1995, 1607, 10, -158, 0, (42 << 16), bhvZipline),
		OBJECT(MODEL_NONE, -5977, 732, -4313, 6, 3, 0, (56 << 16), bhvZipline),
		TERRAIN(ttc_area_1_collision),
		MACRO_OBJECTS(ttc_area_1_macro_objs),
		SET_BACKGROUND_MUSIC(0x00, SEQ_COSMIC_SEED_LEVEL),
		TERRAIN_TYPE(TERRAIN_GRASS),
		/* Fast64 begin persistent block [area commands] */
		/* Fast64 end persistent block [area commands] */
	END_AREA(),

	FREE_LEVEL_POOL(),
	MARIO_POS(0x01, 0, -2924, 50, 6727),
	CALL(0, lvl_init_or_update),
	CALL_LOOP(1, lvl_init_or_update),
	CLEAR_LEVEL(),
	SLEEP_BEFORE_EXIT(1),
	EXIT(),
};
